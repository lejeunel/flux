#+title: Kubernetes infrastructure with FluxCD

This template repo is used to illustrate a [flux-managed Kubernetes cluster]

* K3s
** Local Persistent Storage
Ref: [[https://docs.k3s.io/storage]].
Default directory is /var/lib/rancher/k3s

* Flux
** Bootstrapping
#+begin_src sh
GITHUB_TOKEN=<your-token> \
flux bootstrap github \
  --owner=my-github-username \
  --repository=my-repository \
  --personal \
  --path bootstrap
#+end_src

If provided token is valid (correct permissions are set),
the above command will create a git repo (if it does not
already exist), and proceed to bootstrap flux into
our cluster.

Once the flux bootstrap is completed without errors, list the pods in the cluster again, with ~kubectl get pods -A~.

* Resources

- [[https://geek-cookbook.funkypenguin.co.nz/kubernetes/cluster/][Funky Penguin's Geek Cookbook]]
